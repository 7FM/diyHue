(this.webpackJsonpdiyhue=this.webpackJsonpdiyhue||[]).push([[18],{202:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var c=a(36),n=a(2),s=a(60),i=a.n(s),r=a(191),o=a(170),l=a(31),d=a(188),u=a(88),j=a(176),h=a.n(j);function p(e,t,a){void 0===a&&(a=254);var c=1-e-t,n=(a/254).toFixed(2),s=n/t*e,i=n/t*c,r=1.656492*s-.354851*n-.255038*i,o=.707196*-s+1.655397*n+.036152*i,l=.051713*s-.121364*n+1.01153*i;return r>l&&r>o&&r>1?(o/=r,l/=r,r=1):o>l&&o>r&&o>1?(r/=o,l/=o,o=1):l>r&&l>o&&l>1&&(r/=l,o/=l,l=1),r=r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055,o=o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055,l=l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055,r=Math.round(255*r),o=Math.round(255*o),l=Math.round(255*l),isNaN(r)&&(r=0),isNaN(o)&&(o=0),isNaN(l)&&(l=0),"rgba("+Math.floor(r)+","+Math.floor(o)+","+Math.floor(l)+",1)"}function b(e){var t,a,c,n=2e4/e;return n<=66?(t=255,a=99.4708025861*Math.log(n)-161.1195681661,c=n<=19?0:138.5177312231*Math.log(n-10)-305.0447927307):(t=329.698727446*Math.pow(n-60,-.1332047592),a=288.1221695283*Math.pow(n-60,-.0755148492),c=255),t=t>255?255:t,a=a>255?255:a,c=c>255?255:c,"rgba("+Math.floor(t)+","+Math.floor(a)+","+Math.floor(c)+",1)"}function O(e,t,a){var c=.664511*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.154324*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.162028*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92),n=.283881*e+.668433*t+.047685*a,s=88e-6*e+.07231*t+.986039*a,i=(c/(c+n+s)).toFixed(4),r=(n/(c+n+s)).toFixed(4);return isNaN(i)&&(i=0),isNaN(r)&&(r=0),[parseFloat(i),parseFloat(r)]}var x=a.p+"static/media/nightsky.a7e58287.jpg",g=a(7),f=function(e){var t=e.HOST_IP,a=e.api_key,n=e.groupId,s=e.scenes,r=e.sceneModal,o=e.setSceneModal;function d(){o(!1)}return Object(g.jsxs)(h.a,{isOpen:r,onAfterOpen:function(){},onRequestClose:d,contentLabel:"Example Modal",children:[Object(g.jsxs)("div",{className:"header",children:[Object(g.jsx)("div",{className:"headline",children:"Scene Picker"}),Object(g.jsx)("div",{className:"iconbox",children:Object(g.jsx)("button",{onClick:d,children:Object(g.jsx)(l.q,{})})})]}),Object(g.jsx)("div",{className:"scenecontainer",children:Object.entries(s).filter((function(e){return e[1].group===n})).map((function(e){var n=Object(c.a)(e,2),s=n[0],r=n[1];return Object(g.jsxs)("div",{className:"scene",style:{background:"url(".concat(x,")"),backgroundSize:"cover"},onClick:function(){return function(e){i.a.put("".concat(t,"/api/").concat(a,"/groups/0/action"),{scene:e})}(s)},children:[Object(g.jsxs)("div",{className:"dimmer",children:[Object.entries(r.lightstates).filter((function(e,t){return t<5})).map((function(e){var n,s=Object(c.a)(e,2),r=s[0],o=s[1];return Object(g.jsx)("div",{className:"color",style:{background:"".concat((n=o,"xy"in n?p(n.xy[0],n.xy[1],254):"ct"in n?b(n.ct):"rgba(200,200,200,1)"))},onClick:function(){return function(e,c){i.a.put("".concat(t,"/api/").concat(a,"/lights/").concat(e,"/state"),c)}(r,o)}},r)})),Object(g.jsx)("div",{className:"name",children:r.name})]}),Object(g.jsx)("div",{className:"dynamiccontrol",children:Object(g.jsx)("i",{className:"far fa-play-circle"})})]},s)}))})]})},m=a(186),v=function(e){var t=e.HOST_IP,a=e.api_key,c=e.id,n=e.light,s=function(e){console.log("Apply state "+JSON.stringify(e)),i.a.put("".concat(t,"/api/").concat(a,"/lights/").concat(c,"/state"),e)};return Object(g.jsxs)("div",{className:"groupCard light",children:[Object(g.jsxs)("div",{className:"row top",children:[Object(g.jsx)("div",{className:"gradient",style:function(){if(n.state.on)return{background:"xy"===n.state.colormode?p(n.state.xy[0],n.state.xy[1],254):"ct"===n.state.colormode?b(n.state.ct):"linear-gradient(90deg, rgba(255,212,93,1))"}}(),children:Object(g.jsx)(l.k,{})}),Object(g.jsx)("div",{className:"text",children:Object(g.jsxs)("p",{className:"name",children:[n.name," ",n.state.reachable||Object(g.jsx)(m.a,{title:"Unrechable"})]})}),Object(g.jsx)("div",{className:"switchContainer",children:Object(g.jsxs)("label",{className:"switch",children:[Object(g.jsx)("input",{type:"checkbox",defaultChecked:n.state.on,onChange:function(e){return s({on:e.currentTarget.checked})}}),Object(g.jsx)("span",{className:"slider"})]})})]}),Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("div",{className:"sliderContainer",children:Object(g.jsx)("input",{type:"range",min:"1",max:"254",defaultValue:n.state.bri,className:"slider",onChange:function(e){return s({bri:parseInt(e.currentTarget.value)})}})})})]})},y=a(174);function N(e){var t=e.HOST_IP,a=e.api_key,c=e.lights,s=e.groupLights,r=Object(n.useRef)(null),l=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e,n=[],d=Object(o.a)(s.entries());try{for(d.s();!(e=d.n()).done;){var u=e.value;u=u[1],"xy"in c[u].state&&n.push(p(c[u].state.xy[0],c[u].state.xy[1],254))}}catch(j){d.e(j)}finally{d.f()}r.current&&!l.current&&(l.current=new y.a.ColorPicker(r.current,{layout:[{component:y.a.ui.Wheel,options:{}}],colors:n}),l.current.on("input:end",(function(e){var c=e.rgb;i.a.put("".concat(t,"/api/").concat(a,"/lights/").concat(s[e.index],"/state"),{xy:O(c.r,c.g,c.b)})})))}),[s,c,t,a]),Object(g.jsx)("div",{ref:r})}function k(e){var t=e.HOST_IP,a=e.api_key,c=e.group,s=e.groupId,r=Object(n.useRef)(null),o=Object(n.useRef)(null);return Object(n.useEffect)((function(){r.current&&!o.current&&(o.current=new y.a.ColorPicker(r.current,{layoutDirection:"horizontal",layout:[{component:y.a.ui.Slider,options:{sliderType:"kelvin",sliderShape:"circle"}}],color:b(c.action.ct)}),o.current.on("input:end",(function(e){var c=e.kelvin,n=Math.floor((11e3-c)/25.5+153);i.a.put("".concat(t,"/api/").concat(a,"/groups/").concat(s,"/action"),{ct:n})})))}),[c,s,t,a]),Object(g.jsx)("div",{ref:r})}var w=a(187),_=a.n(w),M=a(162),C=a(161),P=a(203),T=a(175),I=function(e){var t=e.HOST_IP,a=e.api_key,s=e.id,j=e.group,h=e.lights,O=e.scenes,x=Object(n.useState)("closed"),m=Object(c.a)(x,2),y=m[0],w=m[1],I=Object(n.useState)(!1),S=Object(c.a)(I,2),H=S[0],E=S[1],A=Object(n.useState)([]),F=Object(c.a)(A,2),z=F[0],R=F[1],U={opened:{opacity:1},closed:{opacity:0}};!function(){var e,t=Object(o.a)(j.lights);try{for(t.s();!(e=t.n()).done;){var a=e.value;"xy"in h[a].state&&!z.includes("xy")&&R([].concat(Object(r.a)(z),["xy"])),"ct"in h[a].state&&!z.includes("ct")&&R([].concat(Object(r.a)(z),["ct"]))}}catch(c){t.e(c)}finally{t.f()}}();var J=Object(n.useCallback)(_()((function(e){j.action.bri=e;var c={bri:e};i.a.put("".concat(t,"/api/").concat(a,"/groups/").concat(s,"/action"),c)}),300),[]);return Object(g.jsxs)("div",{className:"groupCard",children:[Object(g.jsx)(f,{HOST_IP:t,api_key:a,groupId:s,scenes:O,sceneModal:H,setSceneModal:E}),Object(g.jsxs)("div",{className:"row top",children:[Object(g.jsx)("div",{className:"gradient",style:function(){if(j.state.any_on){var e,t="linear-gradient(45deg, ",a=100/j.lights.length,n=Object(o.a)(j.lights.entries());try{for(n.s();!(e=n.n()).done;){var s=Object(c.a)(e.value,2),i=s[0],r=s[1];"xy"===h[r].state.colormode?(1===j.lights.length&&(t+="rgba(200,200,200,1) 0%,"),t=t+p(h[r].state.xy[0],h[r].state.xy[1],254)+" "+Math.floor(a*(i+1))+"%,"):"ct"===h[r].state.colormode?(1===j.lights.length&&(t+="rgba(200,200,200,1) 0%,"),t=t+b(h[r].state.ct)+" "+Math.floor(a*(i+1))+"%,"):(1===j.lights.length&&(t+="rgba(200,200,200,1) 0%,"),t=t+"rgba(255,212,93,1) "+Math.floor(a*(i+1))+"%,")}}catch(l){n.e(l)}finally{n.f()}return{background:t.slice(0,-1)+")"}}}(),children:"Zone"===j.type?Object(g.jsx)(d.a,{style:{fill:j.state.any_on?"#3a3a3a":"#ddd"}}):Object(g.jsx)(T.a,{type:"room-"+j.class,color:j.state.any_on?"#3a3a3a":"#ddd"})}),Object(g.jsxs)("div",{className:"text",children:[Object(g.jsxs)("p",{className:"name",children:[" ",j.name," "]}),Object(g.jsx)("p",{className:"subtext",children:function(){var e,t=0,a=0,c=Object(o.a)(j.lights);try{for(c.s();!(e=c.n()).done;){var n=e.value;!0===h[n].state.on?t+=1:a+=1}}catch(s){c.e(s)}finally{c.f()}return 0===t?"All lights off":0===a?"All lights on":t+" lights on"}()})]}),Object(g.jsx)("div",{className:"switchContainer",children:Object(g.jsxs)("label",{className:"switch",children:[Object(g.jsx)("input",{type:"checkbox",defaultValue:j.state.any_on,defaultChecked:j.state.any_on,onChange:function(e){return function(e){var c={on:e};j.state.any_on=e,e||w("closed"),i.a.put("".concat(t,"/api/").concat(a,"/groups/").concat(s,"/action"),c)}(e.target.checked)}}),Object(g.jsx)("span",{className:"slider",children:" "})]})})]}),Object(g.jsx)("div",{className:"row background",children:Object(g.jsx)(M.a,{initial:!1,children:j.state.any_on&&Object(g.jsx)(C.a.div,{className:"sliderContainer",initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3},children:Object(g.jsx)("input",{type:"range",min:"1",max:"254",defaultValue:j.action.bri,step:"1",className:"slider",onChange:function(e){return J(parseInt(e.target.value))}})})})}),Object(g.jsxs)(P.a,{children:["closed"!==y&&Object(g.jsxs)(C.a.div,{className:"row buttons",initial:"closed",animate:"closed"===y?"closed":"opened",variants:U,children:[Object(g.jsx)(C.a.div,{className:"btn ".concat(z.includes("xy")?"":"disabled"),whileHover:{scale:1.2},whileTap:{scale:.9},variants:U,children:Object(g.jsx)(l.n,{onClick:!!z.includes("xy")&&function(){return w("colorPicker")}})}),Object(g.jsx)(C.a.div,{className:"btn ".concat(z.includes("ct")?"":"disabled"),whileHover:{scale:1.2},whileTap:{scale:.9},children:Object(g.jsx)(u.b,{onClick:!!z.includes("ct")&&function(){return w("colorTempPicker")}})}),Object(g.jsx)(C.a.div,{className:"btn",whileHover:{scale:1.2},whileTap:{scale:.9},children:Object(g.jsx)(l.i,{onClick:function(){return E(!0)}})}),Object(g.jsx)(C.a.div,{className:"btn",whileHover:{scale:1.2},whileTap:{scale:.9},children:Object(g.jsx)(l.k,{onClick:function(){return w("lights")}})})]}),Object(g.jsx)(C.a.div,{className:"row colorpicker",children:Object(g.jsxs)(M.a,{initial:!1,exitBeforeEnter:!0,children:["colorPicker"===y&&Object(g.jsx)(C.a.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,scale:1,height:"auto"},collapsed:{opacity:0,scale:.5,height:0}},transition:{duration:.3},children:Object(g.jsx)(N,{HOST_IP:t,api_key:a,lights:h,groupLights:j.lights})},"content"),"colorTempPicker"===y&&Object(g.jsx)(C.a.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto",scale:1},collapsed:{opacity:0,height:0}},transition:{duration:.3},children:Object(g.jsx)(k,{HOST_IP:t,api_key:a,groupId:s,group:j})},"content"),"lights"===y&&Object(g.jsx)(C.a.div,{className:"lights",initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3},children:j.lights.map((function(e){return Object(g.jsx)(v,{HOST_IP:t,api_key:a,id:e,light:h[e]},e)}))})]})})]}),Object(g.jsx)(M.a,{children:Object(g.jsx)("div",{className:"row bottom",children:Object(g.jsx)(C.a.div,{className:"expandbtn",initial:"collapsed",animate:"closed"===y?"collapsed":"open",whileHover:{scale:1.2},whileTap:{scale:.9},variants:{open:{rotate:180},collapsed:{rotate:0}},transition:{duration:.3},children:Object(g.jsx)(l.c,{onClick:function(){"closed"===y?z.includes("xy")?w("colorPicker"):z.includes("ct")?w("colorTempPicker"):w("lights"):w("closed")}})})})})]})},S=a(189);var H=function(){return Object(g.jsxs)("div",{className:"roomsetup",children:[Object(g.jsx)("p",{children:"There are no rooms or zones created yet. Use Hue Essentials or Hue app to set up this bridge."}),Object(g.jsxs)("div",{className:"storebutton",children:[Object(g.jsx)("img",{src:"https://is4-ssl.mzstatic.com/image/thumb/Purple122/v4/13/34/4f/13344f80-706e-257c-c72b-e9d698a33bc5/AppIcon-1x_U007emarketing-0-7-0-85-220.png/246x0w.webp"}),Object(g.jsx)("p",{children:"Hue Essentials"}),Object(g.jsx)("a",{href:"https://apps.apple.com/com/app/hue-essentials/id1462943921",children:Object(g.jsx)(l.a,{})}),Object(g.jsx)("a",{href:"https://play.google.com/store/apps/details?id=com.superthomaslab.hueessentials",children:Object(g.jsx)(S.a,{})})]}),Object(g.jsxs)("div",{className:"storebutton",children:[Object(g.jsx)("img",{src:"https://is3-ssl.mzstatic.com/image/thumb/Purple112/v4/a8/30/a2/a830a22d-e50b-d1d7-0824-457beac55874/AppIcon-1x_U007emarketing-0-7-0-85-220.png/246x0w.webp"}),Object(g.jsx)("p",{children:"Phillips Hue"}),Object(g.jsx)("a",{href:"https://apps.apple.com/us/app/philips-hue/id1055281310",children:Object(g.jsx)(l.a,{})}),Object(g.jsx)("a",{href:"https://play.google.com/store/apps/details?id=com.philips.lighting.hue2",children:Object(g.jsx)(S.a,{})})]})]})};function E(e){var t=e.HOST_IP,a=e.API_KEY,s=Object(n.useState)({config:{},lights:{},groups:{},scenes:{}}),r=Object(c.a)(s,2),o=r[0],l=r[1];return Object(n.useEffect)((function(){var e=function(){void 0!==a&&i.a.get("".concat(t,"/api/").concat(a)).then((function(e){l(e.data)})).catch((function(e){console.error(e)}))};e();var c=setInterval((function(){e()}),2e3);return function(){return clearInterval(c)}}),[t,a]),Object(g.jsx)("div",{className:"inner",children:Object(g.jsxs)("div",{className:"cardGrid",children:[0===Object.keys(o.groups).length?Object(g.jsx)(H,{}):Object(g.jsx)(g.Fragment,{}),Object.entries(o.groups).filter((function(e){return"Entertainment"!==e[1].type})).map((function(e){var n=Object(c.a)(e,2),s=n[0],i=n[1];return Object(g.jsx)(I,{api_key:a,HOST_IP:t,id:s,group:i,lights:o.lights,scenes:o.scenes},s)}))]})})}}}]);
//# sourceMappingURL=18.2ceadaef.chunk.js.map