{"version":3,"sources":["containers/Flash.js","containers/LightUpdate.js","containers/Light.js","containers/AddLight.js","views/Lights.js"],"names":["Flash","type","message","duration","setType","persistOnHover","className","onClick","LightUpdate","light","lightsCatalog","setMessage","UpdateLight","includes","lenght","title","confirmAlert","buttons","label","Light","HOST_IP","api_key","id","modelIds","deleteLight","axios","delete","then","fetchedData","console","log","data","catch","error","options","map","modelid","value","color","put","alert","placeholder","onChange","e","post","menuPortalTarget","document","body","menuPosition","style","cursor","window","open","AddLight","API_KEY","useState","protocol","lightData","setLightData","handleChange","key","onSubmit","evt","preventDefault","formattedData","ip","config","handleForm","target","lightName","lightModelID","miID","miModes","miGroups","miBoxPort","domoticzID","jeedomlightAPI","jeedomlightID","Lights","lights","setLights","setlightsCatalog","setModelIds","lightForm","setLightForm","useEffect","fetchLights","undefined","get","interval","setInterval","clearInterval","Object","entries"],"mappings":"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","file":"static/js/16.9c84dfaa.chunk.js","sourcesContent":["import { FaTimes } from \"react-icons/fa\";\nimport FlashMessage from \"react-flash-message\";\n\nexport default function Flash({ type, message, duration, setType }) {\n  return (\n    <FlashMessage duration={duration} persistOnHover={true}>\n      <div className=\"notificationContainer\">\n        <div className={`notification ${type}`}>\n          <p>{message}</p>\n          <div className=\"icon\">\n            <FaTimes onClick={() => setType(\"none\")} />\n          </div>\n        </div>\n      </div>\n    </FlashMessage>\n  );\n}\n","import { MdSystemUpdate } from \"react-icons/md\";\nimport { confirmAlert } from \"react-confirm-alert\"; // Import\nimport \"react-confirm-alert/src/react-confirm-alert.css\"; // Import css\n\nconst LightUpdate = ({ light, lightsCatalog, setMessage, setType }) => {\n  const updateAlert = () => {\n    confirmAlert({\n      title: \"Update light \" + light[\"name\"] + \" firmware?\",\n      message: \"Are you sure to do this?\",\n      buttons: [\n        {\n          label: \"Yes\",\n          onClick: () => UpdateLight(),\n        },\n        {\n          label: \"No\",\n        },\n      ],\n    });\n  };\n\n  const UpdateLight = () => {\n    setMessage(\"Begin light firmware update\");\n    setType(\"none\");\n    setType(\"success\");\n  };\n\n  return (\n    <>\n      {[\"native_single\", \"native_multi\"].includes(light[\"protocol\"]) &&\n        lightsCatalog.lenght > 2 &&\n        light[\"protocol_cfg\"][\"version\"] ===\n          lightsCatalog[light[\"protocol_cfg\"][\"type\"]][\"version\"] && (\n          <div className=\"btn blue\">\n            <MdSystemUpdate\n              title=\"Update available\"\n              onClick={() => updateAlert()}\n            />\n          </div>\n        )}\n    </>\n  );\n};\n\nexport default LightUpdate;\n","import { FaLightbulb } from \"react-icons/fa\";\nimport { MdDeleteForever } from \"react-icons/md\";\nimport LightUpdate from \"./LightUpdate\";\nimport axios from \"axios\";\nimport Dropdown from \"react-dropdown\";\nimport \"react-dropdown/style.css\";\nimport { confirmAlert } from \"react-confirm-alert\"; // Import\nimport \"react-confirm-alert/src/react-confirm-alert.css\"; // Import css\nimport { HueIcons } from \"../icons/hass-hue-icons\"\nimport Select from \"react-select\"\n\nconst Light = ({\n  HOST_IP,\n  api_key,\n  id,\n  light,\n  modelIds,\n  setType,\n  setMessage,\n  lightsCatalog,\n}) => {\n  const deleteAlert = () => {\n    confirmAlert({\n      title: \"Delete light \" + light[\"name\"],\n      message: \"Are you sure to do this?\",\n      buttons: [\n        {\n          label: \"Yes\",\n          onClick: () => deleteLight(),\n        },\n        {\n          label: \"No\",\n        },\n      ],\n    });\n  };\n\n  const deleteLight = () => {\n    axios\n      .delete(`${HOST_IP}/api/${api_key}/lights/${id}`)\n      .then((fetchedData) => {\n        console.log(fetchedData.data);\n        setMessage(\"Light successfully deleted\");\n        setType(\"none\");\n        setType(\"success\");\n      })\n      .catch((error) => {\n        console.error(error);\n        setMessage(\"Error occured, check browser console\");\n        setType(\"none\");\n        setType(\"error\");\n      });\n  };\n\n  const alertLight = () => {\n    axios\n      .put(`${HOST_IP}/api/${api_key}/lights/${id}/state`, { alert: \"select\" })\n      .then((fetchedData) => {\n        console.log(fetchedData.data);\n        setMessage(\"Light alerted\");\n        setType(\"none\");\n        setType(\"success\");\n      })\n      .catch((error) => {\n        console.error(error);\n        setMessage(\"Error occured, check browser console\");\n        setType(\"none\");\n        setType(\"error\");\n      });\n  };\n\n  const setModelId = (modelid) => {\n    console.log({ [id]: modelid });\n    axios\n      .post(`${HOST_IP}/light-types`, { [id]: modelid })\n      .then((fetchedData) => {\n        console.log(fetchedData.data);\n        setMessage(\"Modelid updated\");\n        setType(\"none\");\n        setType(\"success\");\n      })\n      .catch((error) => {\n        console.error(error);\n        setMessage(\"Error occured, check browser console\");\n        setType(\"none\");\n        setType(\"error\");\n      });\n  };\n\n  let options = modelIds.map(function (modelid) {\n    return { value: modelid, label: modelid };\n  })\n\n \n\n  return (\n    <div className=\"devicecard light\">\n      <div className=\"row1\">\n        <div className=\"icon\">\n          <HueIcons\n          type = {\"light-\" + light[\"config\"][\"archetype\"]}\n          color= \"#eeeeee\"\n          onClick={() => alertLight()} />\n        </div>\n\n        <div className=\"text\">{light[\"name\"]} </div>\n      </div>\n      <div className=\"row3\">\n        <div className=\"form-control\">\n          <Select \n            options={options}\n            placeholder={light[\"modelid\"]}\n            onChange={(e) => setModelId(e.value)}\n            menuPortalTarget={document.body}\n            menuPosition={'fixed'} \n          />\n        </div>\n        <LightUpdate\n          light={light}\n          lightsCatalog={lightsCatalog}\n          setMessage={setMessage}\n          setType={setType}\n        />\n        <div className=\"btn red\">\n          <MdDeleteForever title=\"Delete\" onClick={() => deleteAlert()} />{\" \"}\n        </div>\n      </div>\n      <div className=\"row4\">\n        <ul>\n          <li>Protocol: {light[\"protocol\"]}</li>\n          {[\"native\", \"native_multi\", \"native_single\", \"wled\", \"esphome\"].includes(light[\"protocol\"]) ? (\n            <li style={{cursor:'pointer'}} onClick={()=> window.open(\"http://\" + light[\"protocol_cfg\"][\"ip\"], \"_blank\")}>IP: {light[\"protocol_cfg\"][\"ip\"]}</li>\n          ): (\n            <li>IP: {light[\"protocol_cfg\"][\"ip\"]}</li>\n            )}\n          \n        </ul>\n      </div>\n\n      {light[\"state\"][\"reachable\"] || <div className=\"label\">Offline</div>}\n    </div>\n  );\n};\n\nexport default Light;\n","import { useState } from \"react\";\nimport axios from \"axios\";\nimport Dropdown from \"react-dropdown\";\nimport \"react-dropdown/style.css\";\n\nconst AddLight = ({ setType, setMessage, HOST_IP, API_KEY }) => {\n  const [lightData, setLightData] = useState({\n    protocol: \"auto\",\n  });\n\n  const handleChange = (key, value) => {\n    setLightData({\n      ...lightData,\n      [key]: value,\n    });\n  };\n\n  const handleForm = (evt) => {\n    evt.preventDefault();\n    const { protocol: lightproto, ip: lightip, ...rest } = lightData;\n    const formattedData = {\n      protocol: lightproto,\n      ip: lightip,\n      config: rest,\n    };\n    axios.post(`${HOST_IP}/api/${API_KEY}/lights`, formattedData);\n    setMessage(\"Light added\");\n    setType(\"none\");\n    setType(\"success\");\n  };\n\n  const protocols = [\n    { value: \"auto\", label: \"Autodetect\" },\n    { value: \"domoticz\", label: \"Domoticz\" },\n    { value: \"flex\", label: \"Flex\" },\n    { value: \"jeedom\", label: \"Jeedom\" },\n    { value: \"milight\", label: \"MiLight\" },\n    { value: \"mibox\", label: \"Mi Box\" },\n    { value: \"wiz\", label: \"Wiz\" },\n  ];\n\n  const milightGroups = [\"1\", \"2\", \"3\", \"4\"];\n\n  const milightModes = [\n    { value: \"rgbw\", label: \"RGBW\" },\n    { value: \"cct\", label: \"CCT\" },\n    { value: \"rgb_cct\", label: \"RGB-CCT\" },\n    { value: \"rgb\", label: \"RGB\" },\n  ];\n\n  const lightModelIds = [\n    { value: \"LOM001\", label: \"On/Off Plug\" },\n    { value: \"LWB010\", label: \"Dimmable Light\" },\n    { value: \"LTW001\", label: \"Color temperature Light\" },\n    { value: \"LCT015\", label: \"Color Light\" },\n    { value: \"LST002\", label: \"Color Strip\" },\n  ];\n\n  return (\n    <form onSubmit={(e) => handleForm(e)} className=\"add-form\">\n      <div className=\"form-control\">\n      <label>Protocol:</label>\n      <Dropdown\n        options={protocols}\n        value={lightData.protocol}\n        // On Dropdown component use e.value\n        onChange={(e) => handleChange(\"protocol\", e.value)}\n        placeholder=\"Choose light protocol\"\n      />\n      </div>\n      <div className=\"form-control\">\n        <label>Light IP Address:</label>\n        <input\n          type=\"text\"\n          placeholder=\"192.168.x.x\"\n          value={lightData.ip}\n          // On regular HTML input components use e.taget.value\n          onChange={(e) => handleChange(\"ip\", e.target.value)}\n        />\n      </div>\n      {lightData.protocol !== \"auto\" && (\n        <>\n          <div className=\"form-control\">\n            <label>Name</label>\n            <input\n              type=\"text\"\n              value={lightData.lightName}\n              onChange={(e) => handleChange(\"lightName\", e.target.value)}\n              placeholder=\"Name used on diyhue\"\n            />\n          </div>\n          <div className=\"form-control\">\n            <Dropdown\n              options={lightModelIds}\n              value={lightData.lightModelID}\n              onChange={(e) => handleChange(\"lightModelID\", e.value)}\n              placeholder=\"Emulated light type\"\n            />\n          </div>\n        </>\n      )}\n      {(lightData.protocol === \"milight\" || lightData.protocol === \"mibox\") && (\n        <>\n          <div className=\"form-control\">\n            <label>Device ID</label>\n            <input\n              type=\"text\"\n              value={lightData.miID}\n              onChange={(e) => handleChange(\"miID\", e.target.value)}\n              placeholder=\"0x1234\"\n            />\n          </div>\n          <Dropdown\n            options={milightModes}\n            value={lightData.miModes}\n            onChange={(e) => handleChange(\"miModes\", e.value)}\n            placeholder=\"Choose light mode\"\n          />\n          <Dropdown\n            options={milightGroups}\n            value={lightData.miGroups}\n            onChange={(e) => handleChange(\"miGroups\", e.value)}\n            placeholder=\"Choose light group\"\n          />\n        </>\n      )}\n      {lightData.protocol === \"mibox\" && (\n        <div className=\"form-control\">\n          <label>Port</label>\n          <input\n            type=\"number\"\n            placeholder=\"Mi Box port\"\n            value={lightData.miBoxPort}\n            onChange={(e) => handleChange(\"miboxPort\", e.target.value)}\n          />\n        </div>\n      )}\n      {lightData.protocol === \"domoticz\" && (\n        <div className=\"form-control\">\n          <label>Device ID</label>\n          <input\n            type=\"text\"\n            placeholder=\"\"\n            value={lightData.domoticzID}\n            onChange={(e) => handleChange(\"domoticzID\", e.target.value)}\n          />\n        </div>\n      )}\n      {lightData.protocol === \"jeedom\" && (\n        <>\n          <div className=\"form-control\">\n            <label>Light Api</label>\n            <input\n              type=\"text\"\n              placeholder=\"Light Api\"\n              value={lightData.jeedomlightAPI}\n              onChange={(e) => handleChange(\"jeedomlightAPI\", e.target.value)}\n            />\n          </div>\n          <div className=\"form-control\">\n            <label>Light ID</label>\n            <input\n              type=\"text\"\n              placeholder=\"Light ID\"\n              value={lightData.jeedomlightID}\n              onChange={(e) => handleChange(\"jeedomlightID\", e.target.value)}\n            />\n          </div>\n        </>\n      )}\n      <div className=\"form-control\">\n        <input type=\"submit\" value=\"Add Light\" className=\"btn btn-block\" />\n      </div>\n    </form>\n  );\n};\n\nexport default AddLight;\n","import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Light from \"../containers/Light\";\nimport AddLight from \"../containers/AddLight\";\nimport Flash from \"../containers/Flash\";\n\nexport default function Lights({ HOST_IP, API_KEY }) {\n  const [lights, setLights] = useState({});\n  const [lightsCatalog, setlightsCatalog] = useState({});\n  const [modelIds, setModelIds] = useState([]);\n  const [type, setType] = useState(\"none\");\n  const [message, setMessage] = useState(\"no message\");\n  const [lightForm, setLightForm] = useState(false);\n\n  const searchForLights = () => {\n    if (API_KEY !== undefined) {\n      axios\n        .post(`${HOST_IP}/api/${API_KEY}/lights`, \"\")\n        .then((fetchedData) => {\n          console.log(fetchedData.data);\n          setMessage(\"Searching for new lights...\");\n          setType(\"none\");\n          setType(\"success\");\n        })\n        .catch((error) => {\n          console.error(error);\n          setMessage(\"Error occured, check browser console\");\n          setType(\"none\");\n          setType(\"error\");\n        });\n    }\n  };\n\n  useEffect(() => {\n    const fetchLights = () => {\n      if (API_KEY !== undefined) {\n        axios\n          .get(`${HOST_IP}/lights`)\n          .then((fetchedData) => {\n            console.log(fetchedData.data);\n            setLights(fetchedData.data);\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      }\n    };\n\n    const fetchModelIds = () => {\n      if (API_KEY !== undefined) {\n        axios\n          .get(`${HOST_IP}/light-types`)\n          .then((fetchedData) => {\n            console.log(fetchedData.data);\n            setModelIds(fetchedData.data[\"result\"]);\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      }\n    };\n\n    const fetchLightsCatalog = () => {\n      if (API_KEY !== undefined) {\n        axios\n          .get(`https://raw.githubusercontent.com/diyhue/Lights/master/catalog.json`)\n          .then((fetchedData) => {\n            console.log(fetchedData.data);\n            setlightsCatalog(fetchedData.data);\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      }\n    };\n\n\n    fetchLights();\n    fetchModelIds();\n    fetchLightsCatalog();\n    const interval = setInterval(() => {\n      fetchLights();\n    }, 2000); // <<-- ⏱ 1000ms = 1s\n    return () => clearInterval(interval);\n  }, [HOST_IP, API_KEY]);\n\n  return (\n    <div className=\"content\">\n      <div className=\"inner\">\n        <div className=\"devicecontainer\">\n      {type !== \"none\" && (\n        <Flash\n          type={type}\n          message={message}\n          duration=\"5000\"\n          setType={setType}\n        />\n      )}\n      <div className=\"contentContainer lights\">\n        <div className=\"headline\">Light Configuration</div>\n        <div className=\"btn generic\" onClick={() => searchForLights()}>\n          Scan For Lights\n          <div className=\"btn btn-block\"></div>\n        </div>\n        <button\n          onClick={() => setLightForm(!lightForm)}\n          className=\"generic\"\n          style={{}}\n        >\n          Add light manually\n        </button>\n        {lightForm && <AddLight\n          setType={setType}\n          setMessage={setMessage}\n          HOST_IP={HOST_IP}\n          API_KEY={API_KEY}>\n        </AddLight>}\n      </div>\n      <div className=\"cardGrid\">\n        {Object.entries(lights).map(([id, light]) => (\n          <Light\n            key={id}\n            HOST_IP={HOST_IP}\n            api_key={API_KEY}\n            id={id}\n            light={light}\n            modelIds={modelIds}\n            setType={setType}\n            setMessage={setMessage}\n            lightsCatalog={lightsCatalog}\n          />\n        ))}\n      </div>\n    </div>\n    </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}